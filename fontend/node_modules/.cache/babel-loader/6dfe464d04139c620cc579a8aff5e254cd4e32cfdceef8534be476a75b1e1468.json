{"ast":null,"code":"import _regeneratorRuntime from\"D:/freelance/mistu2/fontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/freelance/mistu2/fontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/freelance/mistu2/fontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import UserMenu from\"../../components/Layout/UserMenu\";import Layout from\"./../../components/Layout/Layout\";import axios from\"axios\";import{useAuth}from\"../../context/auth\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Orders=function Orders(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),orders=_useState2[0],setOrders=_useState2[1];var _useAuth=useAuth(),_useAuth2=_slicedToArray(_useAuth,2),auth=_useAuth2[0],setAuth=_useAuth2[1];var getOrders=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:8000/api/v1/auth/orders\");case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setOrders(data);_context.next=10;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getOrders(){return _ref.apply(this,arguments);};}();useEffect(function(){if(auth!==null&&auth!==void 0&&auth.token)getOrders();},[auth===null||auth===void 0?void 0:auth.token]);return/*#__PURE__*/_jsx(Layout,{title:\"Your Orders\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-flui p-3 m-3 dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsx(UserMenu,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"All Orders\"}),orders===null||orders===void 0?void 0:orders.map(function(o,i){var _o$buyer,_o$products,_o$products2;return/*#__PURE__*/_jsxs(\"div\",{className:\"border shadow\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Buyer\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\" date\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Payment\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Quantity\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:o.status}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:(_o$buyer=o.buyer)===null||_o$buyer===void 0?void 0:_o$buyer.name}),/*#__PURE__*/_jsx(\"td\",{children:moment(o===null||o===void 0?void 0:o.createAt).fromNow()}),/*#__PURE__*/_jsx(\"td\",{children:o!==null&&o!==void 0&&o.payment.success?\"Success\":\"Failed\"}),/*#__PURE__*/_jsx(\"td\",{children:o===null||o===void 0?void 0:(_o$products=o.products)===null||_o$products===void 0?void 0:_o$products.length})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:o===null||o===void 0?void 0:(_o$products2=o.products)===null||_o$products2===void 0?void 0:_o$products2.map(function(p,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-2 p-3 card flex-row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8000/api/v1/product/product-photo/\".concat(p._id),className:\"card-img-top\",alt:p.name,width:\"100px\",height:\"100px\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8\",children:[/*#__PURE__*/_jsx(\"p\",{children:p.name}),/*#__PURE__*/_jsx(\"p\",{children:p.description.substring(0,30)}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price : \",p.price]})]})]},p._id);})})]});})]})]})})});};export default Orders;","map":{"version":3,"names":["React","useState","useEffect","UserMenu","Layout","axios","useAuth","moment","jsx","_jsx","jsxs","_jsxs","Orders","_useState","_useState2","_slicedToArray","orders","setOrders","_useAuth","_useAuth2","auth","setAuth","getOrders","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","sent","t0","stop","apply","arguments","token","title","children","className","map","o","i","_o$buyer","_o$products","_o$products2","scope","status","buyer","name","createAt","fromNow","payment","success","products","length","p","src","concat","_id","alt","width","height","description","substring","price"],"sources":["D:/freelance/mistu2/fontend/src/pages/user/Orders.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport UserMenu from \"../../components/Layout/UserMenu\";\r\nimport Layout from \"./../../components/Layout/Layout\";\r\nimport axios from \"axios\";\r\nimport { useAuth } from \"../../context/auth\";\r\nimport moment from \"moment\";\r\n\r\nconst Orders = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [auth, setAuth] = useAuth();\r\n  const getOrders = async () => {\r\n    try {\r\n      const { data } = await axios.get(\r\n        \"http://localhost:8000/api/v1/auth/orders\"\r\n      );\r\n      setOrders(data);\r\n    } catch (error) {\r\n      //console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (auth?.token) getOrders();\r\n  }, [auth?.token]);\r\n  return (\r\n    <Layout title={\"Your Orders\"}>\r\n      <div className=\"container-flui p-3 m-3 dashboard\">\r\n        <div className=\"row\">\r\n          <div className=\"col-md-3\">\r\n            <UserMenu />\r\n          </div>\r\n          <div className=\"col-md-9\">\r\n            <h1 className=\"text-center\">All Orders</h1>\r\n            {orders?.map((o, i) => {\r\n              return (\r\n                <div className=\"border shadow\">\r\n                  <table className=\"table\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\">Status</th>\r\n                        <th scope=\"col\">Buyer</th>\r\n                        <th scope=\"col\"> date</th>\r\n                        <th scope=\"col\">Payment</th>\r\n                        <th scope=\"col\">Quantity</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      <tr>\r\n                        <td>{i + 1}</td>\r\n                        <td>{o?.status}</td>\r\n                        <td>{o?.buyer?.name}</td>\r\n                        <td>{moment(o?.createAt).fromNow()}</td>\r\n                        <td>{o?.payment.success ? \"Success\" : \"Failed\"}</td>\r\n                        <td>{o?.products?.length}</td>\r\n                      </tr>\r\n                    </tbody>\r\n                  </table>\r\n                  <div className=\"container\">\r\n                    {o?.products?.map((p, i) => (\r\n                      <div className=\"row mb-2 p-3 card flex-row\" key={p._id}>\r\n                        <div className=\"col-md-4\">\r\n                          <img\r\n                            src={`http://localhost:8000/api/v1/product/product-photo/${p._id}`}\r\n                            className=\"card-img-top\"\r\n                            alt={p.name}\r\n                            width=\"100px\"\r\n                            height={\"100px\"}\r\n                          />\r\n                        </div>\r\n                        <div className=\"col-md-8\">\r\n                          <p>{p.name}</p>\r\n                          <p>{p.description.substring(0, 30)}</p>\r\n                          <p>Price : {p.price}</p>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Orders;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}