{"ast":null,"code":"import _regeneratorRuntime from\"D:/freelance/mistu2/fontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/freelance/mistu2/fontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/freelance/mistu2/fontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Layout from\"./../components/Layout/Layout\";import axios from\"axios\";import{useParams,useNavigate}from\"react-router-dom\";import\"../styles/ProductDetailsStyles.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductDetails=function ProductDetails(){var _product$price,_product$category;var params=useParams();var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),relatedProducts=_useState4[0],setRelatedProducts=_useState4[1];//initalp details\nuseEffect(function(){if(params!==null&&params!==void 0&&params.slug)getProduct();},[params===null||params===void 0?void 0:params.slug]);//getProduct\nvar getProduct=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:8000/api/v1/product/get-product/\".concat(params.slug));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setProduct(data===null||data===void 0?void 0:data.product);getSimilarProduct(data===null||data===void 0?void 0:data.product._id,data===null||data===void 0?void 0:data.product.category._id);_context.next=11;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function getProduct(){return _ref.apply(this,arguments);};}();//get similar product\nvar getSimilarProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(pid,cid){var _yield$axios$get2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"http://localhost:8000/api/v1/product/related-product/\".concat(pid,\"/\").concat(cid));case 3:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;setRelatedProducts(data===null||data===void 0?void 0:data.products);_context2.next=10;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);case 10:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return function getSimilarProduct(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row container product-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8000/api/v1/product/product-photo/\".concat(product._id),className:\"card-img-top\",alt:product.name,height:\"300\",width:\"350px\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 product-details-info\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Product Details\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Name : \",product.name]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Description : \",product.description]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Price :\",product===null||product===void 0?void 0:(_product$price=product.price)===null||_product$price===void 0?void 0:_product$price.toLocaleString(\"en-US\",{style:\"currency\",currency:\"USD\"})]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Category : \",product===null||product===void 0?void 0:(_product$category=product.category)===null||_product$category===void 0?void 0:_product$category.name]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-secondary ms-1\",children:\"ADD TO CART\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row container similar-products\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Similar Products \\u27A1\\uFE0F\"}),relatedProducts.length<1&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"No Similar Products found\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap\",children:relatedProducts===null||relatedProducts===void 0?void 0:relatedProducts.map(function(p){return/*#__PURE__*/_jsxs(\"div\",{className:\"card m-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"http://localhost:8000/api/v1/product/product-photo/\".concat(p._id),className:\"card-img-top\",alt:p.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-name-price\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:p.name}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title card-price\",children:p.price.toLocaleString(\"en-US\",{style:\"currency\",currency:\"USD\"})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text \",children:[p.description.substring(0,60),\"...\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-name-price\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info ms-1\",onClick:function onClick(){return navigate(\"/product/\".concat(p.slug));},children:\"More Details\"})})]})]},p._id);})})]})]});};export default ProductDetails;","map":{"version":3,"names":["React","useState","useEffect","Layout","axios","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","ProductDetails","_product$price","_product$category","params","navigate","_useState","_useState2","_slicedToArray","product","setProduct","_useState3","_useState4","relatedProducts","setRelatedProducts","slug","getProduct","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","concat","sent","getSimilarProduct","_id","category","t0","stop","apply","arguments","_ref2","_callee2","pid","cid","_yield$axios$get2","_callee2$","_context2","products","_x","_x2","children","className","src","alt","name","height","width","description","price","toLocaleString","style","currency","class","length","map","p","substring","onClick"],"sources":["D:/freelance/mistu2/fontend/src/pages/ProductDetails.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./../components/Layout/Layout\";\r\nimport axios from \"axios\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport \"../styles/ProductDetailsStyles.css\";\r\n\r\nconst ProductDetails = () => {\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const [product, setProduct] = useState({});\r\n  const [relatedProducts, setRelatedProducts] = useState([]);\r\n\r\n  //initalp details\r\n  useEffect(() => {\r\n    if (params?.slug) getProduct();\r\n  }, [params?.slug]);\r\n  //getProduct\r\n  const getProduct = async () => {\r\n    try {\r\n      const { data } = await axios.get(\r\n        `http://localhost:8000/api/v1/product/get-product/${params.slug}`\r\n      );\r\n      setProduct(data?.product);\r\n      getSimilarProduct(data?.product._id, data?.product.category._id);\r\n    } catch (error) {\r\n     // console.log(error);\r\n    }\r\n  };\r\n  //get similar product\r\n  const getSimilarProduct = async (pid, cid) => {\r\n    try {\r\n      const { data } = await axios.get(\r\n        `http://localhost:8000/api/v1/product/related-product/${pid}/${cid}`\r\n      );\r\n      setRelatedProducts(data?.products);\r\n    } catch (error) {\r\n     // console.log(error);\r\n    }\r\n  };\r\n  return (\r\n    <Layout>\r\n      <div className=\"row container product-details\">\r\n        <div className=\"col-md-6\">\r\n          <img\r\n            src={`http://localhost:8000/api/v1/product/product-photo/${product._id}`}\r\n            className=\"card-img-top\"\r\n            alt={product.name}\r\n            height=\"300\"\r\n            width={\"350px\"}\r\n          />\r\n        </div>\r\n        <div className=\"col-md-6 product-details-info\">\r\n          <h1 className=\"text-center\">Product Details</h1>\r\n          <hr />\r\n          <h6>Name : {product.name}</h6>\r\n          <h6>Description : {product.description}</h6>\r\n          <h6>\r\n            Price :\r\n            {product?.price?.toLocaleString(\"en-US\", {\r\n              style: \"currency\",\r\n              currency: \"USD\",\r\n            })}\r\n          </h6>\r\n          <h6>Category : {product?.category?.name}</h6>\r\n          <button class=\"btn btn-secondary ms-1\">ADD TO CART</button>\r\n        </div>\r\n      </div>\r\n      <hr />\r\n      <div className=\"row container similar-products\">\r\n        <h4>Similar Products ➡️</h4>\r\n        {relatedProducts.length < 1 && (\r\n          <p className=\"text-center\">No Similar Products found</p>\r\n        )}\r\n        <div className=\"d-flex flex-wrap\">\r\n          {relatedProducts?.map((p) => (\r\n            <div className=\"card m-2\" key={p._id}>\r\n              <img\r\n                src={`http://localhost:8000/api/v1/product/product-photo/${p._id}`}\r\n                className=\"card-img-top\"\r\n                alt={p.name}\r\n              />\r\n              <div className=\"card-body\">\r\n                <div className=\"card-name-price\">\r\n                  <h5 className=\"card-title\">{p.name}</h5>\r\n                  <h5 className=\"card-title card-price\">\r\n                    {p.price.toLocaleString(\"en-US\", {\r\n                      style: \"currency\",\r\n                      currency: \"USD\",\r\n                    })}\r\n                  </h5>\r\n                </div>\r\n                <p className=\"card-text \">\r\n                  {p.description.substring(0, 60)}...\r\n                </p>\r\n                <div className=\"card-name-price\">\r\n                  <button\r\n                    className=\"btn btn-info ms-1\"\r\n                    onClick={() => navigate(`/product/${p.slug}`)}\r\n                  >\r\n                    More Details\r\n                  </button>\r\n                  {/* <button\r\n                  className=\"btn btn-dark ms-1\"\r\n                  onClick={() => {\r\n                    setCart([...cart, p]);\r\n                    localStorage.setItem(\r\n                      \"cart\",\r\n                      JSON.stringify([...cart, p])\r\n                    );\r\n                    toast.success(\"Item Added to cart\");\r\n                  }}\r\n                >\r\n                  ADD TO CART\r\n                </button> */}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default ProductDetails;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}